(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{7805:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n(3326)}])},3326:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n(5893),a=n(7294),i=n(1163);function o(){let[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[r,u]=(0,a.useState)(""),l=(0,i.useRouter)();async function c(t){t.preventDefault();let s=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})}),a=await s.json();s.ok?(localStorage.setItem("token",a.token),localStorage.setItem("username",a.username),l.push("/")):u(a.message||"Signup failed")}return(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e&&fetch("/api/me",{headers:{"x-token":e}}).then(e=>{e.ok&&l.push("/")})},[]),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{children:"Inscription"}),(0,s.jsxs)("form",{onSubmit:c,children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Nom d'utilisateur"}),(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value)})]}),r&&(0,s.jsx)("div",{style:{color:"red"},children:r}),(0,s.jsx)("button",{type:"submit",children:"Cr\xe9er un compte"})]}),(0,s.jsxs)("p",{style:{marginTop:12},children:["Vous avez d\xe9j\xe0 un compte ? ",(0,s.jsx)("a",{href:"/login",children:"Se connecter"})]})]})}},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7805)}),_N_E=e.O()}]);