(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(4375)}])},4375:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return o}});var s=t(5893),a=t(7294),i=t(1163);function o(){let[e,n]=(0,a.useState)(""),[t,o]=(0,a.useState)(""),[l,r]=(0,a.useState)(""),c=(0,i.useRouter)();async function u(n){n.preventDefault();let s=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),a=await s.json();s.ok?(localStorage.setItem("token",a.token),localStorage.setItem("username",a.username),c.push("/")):r(a.message||"Login failed")}return(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e&&fetch("/api/me",{headers:{"x-token":e}}).then(e=>{e.ok&&c.push("/")})},[]),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{children:"lissasfa-top"}),(0,s.jsx)("p",{className:"lead",children:"Connexion"}),(0,s.jsxs)("form",{onSubmit:u,children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Nom d'utilisateur"}),(0,s.jsx)("input",{value:e,onChange:e=>n(e.target.value)})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",value:t,onChange:e=>o(e.target.value)})]}),l&&(0,s.jsx)("div",{style:{color:"red"},children:l}),(0,s.jsx)("button",{type:"submit",children:"Se connecter"})]}),(0,s.jsxs)("p",{style:{marginTop:12},children:["Pas de compte ? ",(0,s.jsx)("a",{href:"/signup",children:"S'inscrire"})]})]})}},1163:function(e,n,t){e.exports=t(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);